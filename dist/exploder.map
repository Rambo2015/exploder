{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap c249d6c9f56876248707","webpack:///./index.js","webpack:///./lib/exploder.js","webpack:///./lib/gif.js","webpack:///./lib/stream_reader.js","webpack:///./lib/utils.js"],"names":[],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Exploder\"] = factory();\n\telse\n\t\troot[\"Exploder\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c249d6c9f56876248707\n **/","module.exports = require('./lib/exploder');\n\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","\"use strict\";\n\nimport Gif from './gif.js';\nimport StreamReader from './stream_reader.js';\nimport { Promises } from './utils.js';\n\nvar url = (URL && URL.createObjectURL) ? URL : webkitURL;\n\nvar gifCache = new Map();\nexport default class Exploder {\n  constructor(file) {\n    this.file = file;\n  }\n\n  load() {\n    var cachedGifPromise = gifCache.get(this.file)\n    if (cachedGifPromise) return cachedGifPromise;\n\n    var gifPromise = Promises.xhrGet(this.file, '*/*', 'arraybuffer')\n      .then(buffer => this.explode(buffer));\n\n    gifCache.set(this.file, gifPromise);\n    return gifPromise;\n  }\n\n  explode(buffer) {\n    console.debug(\"EXPLODING \" + this.file)\n    return new Promise((resolve, reject) => {\n      var frames = [],\n        streamReader = new StreamReader(buffer);\n\n      // Ensure this is an animated GIF\n      if (streamReader.readAscii(6) != \"GIF89a\") {\n        reject(Error(\"Not a GIF!\"));\n        return;\n      }\n\n      streamReader.skipBytes(4); // Height & Width\n      if (streamReader.peekBit(1)) {\n        streamReader.log(\"GLOBAL COLOR TABLE\")\n        var colorTableSize = streamReader.readByte() & 0x07;\n        streamReader.log(\"GLOBAL COLOR TABLE IS \" + 3 * Math.pow(2, colorTableSize + 1) + \" BYTES\")\n        streamReader.skipBytes(2);\n        streamReader.skipBytes(3 * Math.pow(2, colorTableSize + 1));\n      } else {\n        streamReader.log(\"NO GLOBAL COLOR TABLE\")\n      }\n      // WE HAVE ENOUGH FOR THE GIF HEADER!\n      var gifHeader = buffer.slice(0, streamReader.index);\n\n      var spinning = true, expectingImage = false;\n      while (spinning) {\n\n        if (streamReader.isNext([0x21, 0xFF])) {\n          streamReader.log(\"APPLICATION EXTENSION\")\n          streamReader.skipBytes(2);\n          var blockSize = streamReader.readByte();\n          streamReader.log(streamReader.readAscii(blockSize));\n\n          if (streamReader.isNext([0x03, 0x01])) {\n            // we cool\n            streamReader.skipBytes(5)\n          } else {\n            streamReader.log(\"A weird application extension. Skip until we have 2 NULL bytes\");\n            while (!(streamReader.readByte() === 0 && streamReader.peekByte() === 0));\n            streamReader.log(\"OK moving on\")\n            streamReader.skipBytes(1);\n          }\n        } else if (streamReader.isNext([0x21, 0xFE])) {\n          streamReader.log(\"COMMENT EXTENSION\")\n          streamReader.skipBytes(2);\n\n          while (!streamReader.isNext([0x00])) {\n            var blockSize = streamReader.readByte();\n            streamReader.log(streamReader.readAscii(blockSize));\n          }\n          streamReader.skipBytes(1); //NULL terminator\n\n        } else if (streamReader.isNext([0x2c])) {\n          streamReader.log(\"IMAGE DESCRIPTOR!\");\n          if (!expectingImage) {\n            // This is a bare image, not prefaced with a Graphics Control Extension\n            // so we should treat it as a frame.\n            frames.push({ index: streamReader.index, delay: 0 });\n          }\n          expectingImage = false;\n\n          streamReader.skipBytes(9);\n          if (streamReader.peekBit(1)) {\n            streamReader.log(\"LOCAL COLOR TABLE\");\n            var colorTableSize = streamReader.readByte() & 0x07;\n            streamReader.log(\"LOCAL COLOR TABLE IS \" + 3 * Math.pow(2, colorTableSize + 1) + \" BYTES\")\n            streamReader.skipBytes(3 * Math.pow(2, colorTableSize + 1));\n          } else {\n            streamReader.log(\"NO LOCAL TABLE PHEW\");\n            streamReader.skipBytes(1);\n          }\n\n          streamReader.log(\"MIN CODE SIZE \" + streamReader.readByte());\n          streamReader.log(\"DATA START\");\n\n          while (!streamReader.isNext([0x00])) {\n            var blockSize = streamReader.readByte();\n//        streamReader.log(\"SKIPPING \" + blockSize + \" BYTES\");\n            streamReader.skipBytes(blockSize);\n          }\n          streamReader.log(\"DATA END\");\n          streamReader.skipBytes(1); //NULL terminator\n        } else if (streamReader.isNext([0x21, 0xF9, 0x04])) {\n          streamReader.log(\"GRAPHICS CONTROL EXTENSION!\");\n          // We _definitely_ have a frame. Now we're expecting an image\n          var index = streamReader.index;\n\n          streamReader.skipBytes(3);\n          var disposalMethod = streamReader.readByte() >> 2;\n          streamReader.log(\"DISPOSAL \" + disposalMethod);\n          var delay = streamReader.readByte() + streamReader.readByte() * 256;\n          frames.push({ index: index, delay: delay, disposal: disposalMethod });\n          streamReader.log(\"FRAME DELAY \" + delay);\n          streamReader.skipBytes(2);\n          expectingImage = true;\n        } else {\n          var maybeTheEnd = streamReader.index;\n          while (!streamReader.finished() && !streamReader.isNext([0x21, 0xF9, 0x04])) {\n            streamReader.readByte();\n          }\n          if (streamReader.finished()) {\n            streamReader.index = maybeTheEnd;\n            streamReader.log(\"WE END\");\n            spinning = false;\n          } else {\n            streamReader.log(\"UNKNOWN DATA FROM \" + maybeTheEnd);\n          }\n        }\n      }\n      var endOfFrames = streamReader.index;\n\n      var gifFooter = buffer.slice(-1); //last bit is all we need\n      for (var i = 0; i < frames.length; i++) {\n        var frame = frames[i];\n        var nextIndex = (i < frames.length - 1) ? frames[i + 1].index : endOfFrames;\n        frame.blob = new Blob([ gifHeader, buffer.slice(frame.index, nextIndex), gifFooter ], {type: 'image/gif'});\n        frame.url = url.createObjectURL(frame.blob);\n      }\n\n      resolve(new Gif(frames));\n    })\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/exploder.js\n **/","\"use strict\";\n\nvar defaultFrameDelay = 10;\n\nexport default class Gif {\n  constructor(frames) {\n    this.frames = frames;\n    this.length = 0;\n    this.offsets = []\n\n    frames.forEach((frame) => {\n      this.offsets.push(this.length);\n      this.length += (frame.delay || defaultFrameDelay);\n    });\n  }\n\n  frameAt(fraction) {\n    var offset = fraction * this.length;\n    for (var i = 1, l = this.offsets.length; i < l; i++) {\n      if (this.offsets[i] > offset) break;\n    }\n    return i - 1;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/gif.js\n **/","\"use strict\";\n\nexport default class StreamReader {\n  constructor(arrayBuffer) {\n    this.data = new Uint8Array(arrayBuffer);\n    this.index = 0;\n    this.log(\"TOTAL LENGTH: \" + this.data.length);\n  }\n\n  finished() {\n    return this.index >= this.data.length;\n  }\n\n  readByte() {\n    return this.data[this.index++];\n  }\n\n  peekByte() {\n    return this.data[this.index];\n  }\n\n  skipBytes(n) {\n    this.index += n;\n  }\n\n  peekBit(i) {\n    return !!(this.peekByte() & (1 << 8 - i));\n  }\n\n  readAscii(n) {\n    var s = '';\n    for (var i = 0; i < n; i++) {\n      s += String.fromCharCode(this.readByte());\n    }\n    return s;\n  }\n\n  isNext(array) {\n    for (var i = 0; i < array.length; i++) {\n      if (array[i] !== this.data[this.index + i]) return false;\n    }\n    return true;\n  }\n\n  log(str) {\n//  console.log(this.index + \": \" + str);\n  }\n\n  error(str) {\n    console.error(this.index + \": \" + str);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/stream_reader.js\n **/","\"use strict\";\n\nexport var Promises = {\n  xhrGet: (url, accept, responseType) => {\n    return new Promise((resolve, reject) => {\n      var loader = new XMLHttpRequest();\n      loader.open('GET', url, true);\n      loader.setRequestHeader(\"Accept\", accept);\n      loader.responseType = responseType;\n      loader.onload = function() {\n        // This is called even on 404 etc\n        // so check the status\n        if (this.status == 200) {\n          // Resolve the promise with the response text\n          resolve(this.response);\n        }\n        else {\n          // Otherwise reject with the status text\n          // which will hopefully be a meaningful error\n          reject(Error(this.statusText));\n        }\n      };\n\n      // Handle network errors\n      loader.onerror = function() {\n        reject(Error(\"Network Error\"));\n      };\n      loader.send();\n    })\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/utils.js\n **/"],"sourceRoot":"","file":"./dist/exploder.js"}